<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Dashboard - AyurSutra</title>
    <meta name="description" content="Track your wellness journey with personalized Panchakarma care">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container container-xl">
            <a href="index.html" class="nav-logo">
                <div class="logo-icon">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5"/>
                        <path d="M8.5 8.5v.01"/>
                        <path d="M16 15.5v.01"/>
                        <path d="M12 12v.01"/>
                    </svg>
                </div>
                <div class="logo-text">
                    <h1>AyurSutra</h1>
                    <p>Panchakarma Care</p>
                </div>
            </a>

            <ul class="nav-menu" id="mobile-menu">
                <li><a href="index.html" class="nav-item">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                    </svg>
                    Home
                </a></li>
                <li><a href="patient-dashboard.html" class="nav-item active">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                        <circle cx="12" cy="7" r="4"/>
                    </svg>
                    Patient Dashboard
                </a></li>
                <li><a href="practitioner-dashboard.html" class="nav-item">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                        <circle cx="9" cy="7" r="4"/>
                        <path d="m22 2-5 10-5-10 5-2 5 2"/>
                    </svg>
                    Practitioner Dashboard
                </a></li>
                <li><a href="schedule.html" class="nav-item">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <rect width="18" height="18" x="3" y="4" rx="2" ry="2"/>
                        <line x1="16" x2="16" y1="2" y2="6"/>
                        <line x1="8" x2="8" y1="2" y2="6"/>
                        <line x1="3" x2="21" y1="10" y2="10"/>
                    </svg>
                    Schedule
                </a></li>
                <li><a href="progress.html" class="nav-item">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <polyline points="22,12 18,12 15,21 9,3 6,12 2,12"/>
                    </svg>
                    Progress
                </a></li>
                <li><a href="notifications.html" class="nav-item">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                        <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/>
                    </svg>
                    Notifications
                </a></li>
                <li><a href="feedback.html" class="nav-item">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                    </svg>
                    Feedback
                </a></li>
            </ul>

            <button class="mobile-menu-toggle" id="mobile-menu-toggle" onclick="toggleMobileMenu()">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                </svg>
            </button>
        </div>
    </nav>

    <div class="dashboard">
        <div class="container-xl">
            <!-- Header -->
            <div class="dashboard-header">
                <h1 class="dashboard-title">Welcome back, Sarah</h1>
                <p class="dashboard-subtitle">Your wellness journey continues today</p>
                <div class="dashboard-actions">
                    <button class="btn btn-primary" onclick="showBookingModal()">
                        <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M8 2v4"/>
                            <path d="M16 2v4"/>
                            <rect width="18" height="18" x="3" y="4" rx="2"/>
                            <path d="M3 10h18"/>
                        </svg>
                        Book Session
                    </button>
                    <button class="btn btn-outline" onclick="openNewTab('schedule.html')">
                        <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect width="18" height="18" x="3" y="4" rx="2" ry="2"/>
                            <line x1="16" x2="16" y1="2" y2="6"/>
                            <line x1="8" x2="8" y1="2" y2="6"/>
                            <line x1="3" x2="21" y1="10" y2="10"/>
                        </svg>
                        View Schedule
                    </button>
                </div>
            </div>

            <div class="grid lg:grid-cols-3 grid-cols-1">
                <!-- Main Content -->
                <div style="grid-column: span 2;" class="space-y-6">
                    <!-- Progress Overview -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title" style="display: flex; align-items: center; gap: 0.5rem;">
                                <svg class="icon text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <polyline points="22,12 18,12 15,21 9,3 6,12 2,12"/>
                                </svg>
                                Treatment Progress
                            </h2>
                            <p class="card-description">Week 4 of your Panchakarma program</p>
                        </div>
                        <div class="card-content">
                            <div class="space-y-4">
                                <div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                        <span style="font-size: 0.875rem; font-weight: 500;">Overall Progress</span>
                                        <span style="font-size: 0.875rem; color: var(--muted-foreground);">75%</span>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar" id="overall-progress" style="width: 0%;"></div>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-3" style="padding-top: 1rem;">
                                    <div class="text-center">
                                        <div class="text-2xl font-bold text-primary">9</div>
                                        <div style="font-size: 0.75rem; color: var(--muted-foreground);">Completed</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-2xl font-bold" style="color: var(--accent);">3</div>
                                        <div style="font-size: 0.75rem; color: var(--muted-foreground);">Remaining</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-2xl font-bold text-success">12</div>
                                        <div style="font-size: 0.75rem; color: var(--muted-foreground);">Total</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Upcoming Sessions -->
                    <div class="card">
                        <div class="card-header">
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                                <h2 class="card-title" style="display: flex; align-items: center; gap: 0.5rem;">
                                    <svg class="icon text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <rect width="18" height="18" x="3" y="4" rx="2" ry="2"/>
                                        <line x1="16" x2="16" y1="2" y2="6"/>
                                        <line x1="8" x2="8" y1="2" y2="6"/>
                                        <line x1="3" x2="21" y1="10" y2="10"/>
                                    </svg>
                                    Upcoming Sessions
                                </h2>
                                <button class="btn btn-outline btn-sm" onclick="showAddSessionModal()">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <path d="M12 5v14"/>
                                        <path d="M5 12h14"/>
                                    </svg>
                                    + Schedule
                                </button>
                            </div>
                        </div>
                        <div class="card-content">
                            <div class="space-y-4">
                                <!-- Session 1 -->
                                <div style="border: 1px solid var(--border); border-radius: var(--radius); padding: 1rem;">
                                    <div style="display: flex; align-items: start; justify-content: space-between;">
                                        <div style="flex: 1;">
                                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                                <h3 class="font-semibold">Abhyanga</h3>
                                                <span class="badge badge-success">confirmed</span>
                                            </div>
                                            <div style="display: flex; align-items: center; gap: 1rem; font-size: 0.875rem; color: var(--muted-foreground); margin-bottom: 0.5rem;">
                                                <span style="display: flex; align-items: center; gap: 0.25rem;">
                                                    <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <rect width="18" height="18" x="3" y="4" rx="2" ry="2"/>
                                                        <line x1="16" x2="16" y1="2" y2="6"/>
                                                        <line x1="8" x2="8" y1="2" y2="6"/>
                                                        <line x1="3" x2="21" y1="10" y2="10"/>
                                                    </svg>
                                                    Tomorrow
                                                </span>
                                                <span style="display: flex; align-items: center; gap: 0.25rem;">
                                                    <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <circle cx="12" cy="12" r="10"/>
                                                        <polyline points="12,6 12,12 16,14"/>
                                                    </svg>
                                                    10:00 AM
                                                </span>
                                            </div>
                                            <p style="font-size: 0.875rem; color: var(--muted-foreground); margin-bottom: 0.5rem;">
                                                with Dr. Priya Sharma
                                            </p>
                                            <div style="margin-top: 0.5rem; padding: 0.5rem; background-color: hsla(25, 75%, 65%, 0.1); border-radius: 0.5rem; font-size: 0.875rem; color: var(--accent-foreground);">
                                                <strong>Preparation:</strong> Light breakfast only, arrive 15 mins early
                                            </div>
                                        </div>
                                        <button class="btn btn-outline btn-sm" onclick="showRescheduleModal(1)">Reschedule</button>
                                    </div>
                                </div>

                                <!-- Session 2 -->
                                <div style="border: 1px solid var(--border); border-radius: var(--radius); padding: 1rem;">
                                    <div style="display: flex; align-items: start; justify-content: space-between;">
                                        <div style="flex: 1;">
                                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                                <h3 class="font-semibold">Shirodhara</h3>
                                                <span class="badge badge-outline" style="background-color: var(--secondary); color: var(--secondary-foreground);">pending</span>
                                            </div>
                                            <div style="display: flex; align-items: center; gap: 1rem; font-size: 0.875rem; color: var(--muted-foreground); margin-bottom: 0.5rem;">
                                                <span style="display: flex; align-items: center; gap: 0.25rem;">
                                                    <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <rect width="18" height="18" x="3" y="4" rx="2" ry="2"/>
                                                        <line x1="16" x2="16" y1="2" y2="6"/>
                                                        <line x1="8" x2="8" y1="2" y2="6"/>
                                                        <line x1="3" x2="21" y1="10" y2="10"/>
                                                    </svg>
                                                    Dec 16
                                                </span>
                                                <span style="display: flex; align-items: center; gap: 0.25rem;">
                                                    <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <circle cx="12" cy="12" r="10"/>
                                                        <polyline points="12,6 12,12 16,14"/>
                                                    </svg>
                                                    2:00 PM
                                                </span>
                                            </div>
                                            <p style="font-size: 0.875rem; color: var(--muted-foreground); margin-bottom: 0.5rem;">
                                                with Dr. Raj Patel
                                            </p>
                                            <div style="margin-top: 0.5rem; padding: 0.5rem; background-color: hsla(25, 75%, 65%, 0.1); border-radius: 0.5rem; font-size: 0.875rem; color: var(--accent-foreground);">
                                                <strong>Preparation:</strong> Avoid heavy meals 2 hours before
                                            </div>
                                        </div>
                                        <button class="btn btn-outline btn-sm" onclick="showRescheduleModal(2)">Reschedule</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="space-y-6">
                    <!-- Quick Stats -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Today's Wellness</h3>
                        </div>
                        <div class="card-content">
                            <div class="space-y-4">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                                        <svg class="icon-sm" style="color: #ef4444;" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                            <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7Z"/>
                                        </svg>
                                        <span style="font-size: 0.875rem;">Energy Level</span>
                                    </div>
                                    <div style="font-size: 0.875rem; font-weight: 500; color: var(--success);">Good</div>
                                </div>
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                                        <svg class="icon-sm" style="color: #3b82f6;" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                            <polyline points="22,12 18,12 15,21 9,3 6,12 2,12"/>
                                        </svg>
                                        <span style="font-size: 0.875rem;">Sleep Quality</span>
                                    </div>
                                    <div style="font-size: 0.875rem; font-weight: 500; color: var(--primary);">Excellent</div>
                                </div>
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                                        <svg class="icon-sm" style="color: #10b981;" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                            <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/>
                                            <path d="m9 12 2 2 4-4"/>
                                        </svg>
                                        <span style="font-size: 0.875rem;">Mood</span>
                                    </div>
                                    <div style="font-size: 0.875rem; font-weight: 500; color: var(--success);">Positive</div>
                                </div>
                            </div>
                            <button class="btn btn-outline" style="width: 100%; margin-top: 1rem;" onclick="showWellnessModal()">
                                Log Today's Wellness
                            </button>
                        </div>
                    </div>

                    <!-- Notifications -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title" style="display: flex; align-items: center; gap: 0.5rem;">
                                <svg class="icon text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                                    <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/>
                                </svg>
                                Notifications
                            </h3>
                        </div>
                        <div class="card-content">
                            <div class="space-y-3">
                                <!-- Notification 1 -->
                                <div class="notification-unread" style="padding: 0.75rem; border-radius: var(--radius); border: 1px solid var(--border);">
                                    <div style="display: flex; align-items: start; gap: 0.5rem;">
                                        <svg class="icon-sm notification-icon" style="color: var(--accent); margin-top: 0.125rem;" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                            <circle cx="12" cy="12" r="10"/>
                                            <polyline points="12,6 12,12 16,14"/>
                                        </svg>
                                        <div style="flex: 1; min-width: 0;">
                                            <p style="font-size: 0.875rem; font-weight: 500; margin-bottom: 0.25rem;">Session Reminder</p>
                                            <p style="font-size: 0.75rem; color: var(--muted-foreground); margin-bottom: 0.25rem;">Your Abhyanga session is tomorrow at 10:00 AM</p>
                                            <p style="font-size: 0.75rem; color: var(--muted-foreground);">2 hours ago</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Notification 2 -->
                                <div style="padding: 0.75rem; border-radius: var(--radius); border: 1px solid var(--border); background-color: hsla(140, 10%, 45%, 0.05);">
                                    <div style="display: flex; align-items: start; gap: 0.5rem;">
                                        <svg class="icon-sm notification-icon text-primary" style="margin-top: 0.125rem;" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                            <circle cx="12" cy="12" r="3"/>
                                            <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"/>
                                        </svg>
                                        <div style="flex: 1; min-width: 0;">
                                            <p style="font-size: 0.875rem; font-weight: 500; margin-bottom: 0.25rem;">Pre-procedure Guidelines</p>
                                            <p style="font-size: 0.75rem; color: var(--muted-foreground); margin-bottom: 0.25rem;">Please follow the dietary restrictions for your upcoming Shirodhara</p>
                                            <p style="font-size: 0.75rem; color: var(--muted-foreground);">1 day ago</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <button class="btn btn-outline btn-sm" style="width: 100%; margin-top: 1rem;" onclick="window.location.href='notifications.html'">
                                View All Notifications
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking Modal -->
    <div id="booking-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Book New Session</h2>
                <button class="modal-close" onclick="closeBookingModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="booking-form">
                    <div class="form-group">
                        <label for="practitioner-select">Practitioner</label>
                        <select id="practitioner-select" required>
                            <option value="">Select Practitioner</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="treatment-select">Treatment Type</label>
                        <select id="treatment-select" required>
                            <option value="">Select Treatment</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="session-date">Date</label>
                        <input type="date" id="session-date" required>
                    </div>
                    <div class="form-group">
                        <label for="session-time">Time</label>
                        <input type="time" id="session-time" required>
                    </div>
                    <div class="form-group">
                        <label for="session-notes">Notes (Optional)</label>
                        <textarea id="session-notes" rows="3" placeholder="Any special requests or notes..."></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" onclick="closeBookingModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Book Session</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Session Modal -->
    <div id="add-session-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Session</h2>
                <button class="modal-close" onclick="closeAddSessionModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="add-session-form">
                    <div class="form-group">
                        <label for="add-patient-select">Patient</label>
                        <select id="add-patient-select" required>
                            <option value="">Select Patient</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="add-treatment-select">Treatment Type</label>
                        <select id="add-treatment-select" required>
                            <option value="">Select Treatment</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="add-session-date">Date</label>
                        <input type="date" id="add-session-date" required>
                    </div>
                    <div class="form-group">
                        <label for="add-session-time">Time</label>
                        <input type="time" id="add-session-time" required>
                    </div>
                    <div class="form-group">
                        <label for="add-session-duration">Duration (minutes)</label>
                        <input type="number" id="add-session-duration" min="15" max="180" value="60" required>
                    </div>
                    <div class="form-group">
                        <label for="add-session-notes">Notes (Optional)</label>
                        <textarea id="add-session-notes" rows="3" placeholder="Session notes or special instructions..."></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" onclick="closeAddSessionModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add Session</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Reschedule Modal -->
    <div id="reschedule-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Reschedule Session</h2>
                <button class="modal-close" onclick="closeRescheduleModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="reschedule-form">
                    <input type="hidden" id="reschedule-session-id" value="">
                    <div class="form-group">
                        <label for="reschedule-date">New Date</label>
                        <input type="date" id="reschedule-date" required>
                    </div>
                    <div class="form-group">
                        <label for="reschedule-time">New Time</label>
                        <input type="time" id="reschedule-time" required>
                    </div>
                    <div class="form-group">
                        <label for="reschedule-reason">Reason for Rescheduling</label>
                        <textarea id="reschedule-reason" rows="3" placeholder="Please explain why you need to reschedule..." required></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" onclick="closeRescheduleModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Submit Request</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Wellness Modal -->
    <div id="wellness-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Log Today's Wellness</h2>
                <button class="modal-close" onclick="closeWellnessModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="wellness-form">
                    <div class="form-group">
                        <label>Energy Level</label>
                        <div class="rating-slider">
                            <input type="range" id="energy-level" min="1" max="5" value="3" class="slider">
                            <div class="slider-labels">
                                <span>Very Low</span>
                                <span>Low</span>
                                <span>Moderate</span>
                                <span>High</span>
                                <span>Very High</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Sleep Quality</label>
                        <div class="rating-slider">
                            <input type="range" id="sleep-quality" min="1" max="5" value="3" class="slider">
                            <div class="slider-labels">
                                <span>Poor</span>
                                <span>Fair</span>
                                <span>Good</span>
                                <span>Very Good</span>
                                <span>Excellent</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Mood</label>
                        <div class="rating-slider">
                            <input type="range" id="mood" min="1" max="5" value="3" class="slider">
                            <div class="slider-labels">
                                <span>Very Poor</span>
                                <span>Poor</span>
                                <span>Neutral</span>
                                <span>Good</span>
                                <span>Excellent</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Stress Level</label>
                        <div class="rating-slider">
                            <input type="range" id="stress-level" min="1" max="5" value="3" class="slider">
                            <div class="slider-labels">
                                <span>Very High</span>
                                <span>High</span>
                                <span>Moderate</span>
                                <span>Low</span>
                                <span>Very Low</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="symptoms">Symptoms (Optional)</label>
                        <textarea id="symptoms" rows="3" placeholder="Describe any symptoms you're experiencing..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="wellness-notes">Notes (Optional)</label>
                        <textarea id="wellness-notes" rows="3" placeholder="Any additional notes about your wellness..."></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" onclick="closeWellnessModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Log Wellness</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="api.js"></script>
    <script>
        // Patient Dashboard specific functions
        function openNewTab(url) {
            window.open(url, '_blank');
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('active');
        }

        // Patient Dashboard specific modal functions
        function showAddSessionModal() {
            console.log('showAddSessionModal called');
            const modal = document.getElementById('add-session-modal');
            console.log('Modal found:', modal);
            if (modal) {
                modal.style.display = 'block';
                // Set minimum date to today
                const dateInput = document.getElementById('add-session-date');
                if (dateInput) {
                    dateInput.min = new Date().toISOString().split('T')[0];
                }
                // Populate selects
                populateAddSessionSelects();
            } else {
                console.error('Add session modal not found!');
            }
        }

        function closeAddSessionModal() {
            const modal = document.getElementById('add-session-modal');
            if (modal) {
                modal.style.display = 'none';
                document.getElementById('add-session-form').reset();
            }
        }

        function showRescheduleModal(sessionId) {
            console.log('showRescheduleModal called with sessionId:', sessionId);
            const modal = document.getElementById('reschedule-modal');
            const sessionIdInput = document.getElementById('reschedule-session-id');
            console.log('Reschedule modal found:', modal);
            if (modal && sessionIdInput) {
                sessionIdInput.value = sessionId;
                modal.style.display = 'block';
                // Set minimum date to today
                const dateInput = document.getElementById('reschedule-date');
                if (dateInput) {
                    dateInput.min = new Date().toISOString().split('T')[0];
                }
            } else {
                console.error('Reschedule modal or session ID input not found!');
            }
        }

        function closeRescheduleModal() {
            const modal = document.getElementById('reschedule-modal');
            if (modal) {
                modal.style.display = 'none';
                document.getElementById('reschedule-form').reset();
            }
        }

        function showWellnessModal() {
            console.log('showWellnessModal called');
            const modal = document.getElementById('wellness-modal');
            console.log('Wellness modal found:', modal);
            if (modal) {
                modal.style.display = 'block';
            } else {
                console.error('Wellness modal not found!');
            }
        }

        function closeWellnessModal() {
            const modal = document.getElementById('wellness-modal');
            if (modal) {
                modal.style.display = 'none';
                document.getElementById('wellness-form').reset();
            }
        }

        function populateAddSessionSelects() {
            // Populate practitioners
            const practitionerSelect = document.getElementById('add-patient-select');
            if (practitionerSelect) {
                practitionerSelect.innerHTML = '<option value="">Select Patient</option>';
                // Add demo patients
                const patients = [
                    { id: 1, name: 'Sarah Johnson' },
                    { id: 2, name: 'John Smith' },
                    { id: 3, name: 'Emily Davis' }
                ];
                patients.forEach(patient => {
                    const option = document.createElement('option');
                    option.value = patient.id;
                    option.textContent = patient.name;
                    practitionerSelect.appendChild(option);
                });
            }
            
            // Populate treatments
            const treatmentSelect = document.getElementById('add-treatment-select');
            if (treatmentSelect) {
                treatmentSelect.innerHTML = '<option value="">Select Treatment</option>';
                const treatments = [
                    { id: 1, name: 'Ayurvedic Massage', duration: 60, price: 80 },
                    { id: 2, name: 'Yoga Therapy', duration: 45, price: 60 },
                    { id: 3, name: 'Herbal Consultation', duration: 30, price: 40 },
                    { id: 4, name: 'Meditation Session', duration: 30, price: 35 }
                ];
                treatments.forEach(treatment => {
                    const option = document.createElement('option');
                    option.value = treatment.id;
                    option.textContent = `${treatment.name} - ${treatment.duration} min - $${treatment.price}`;
                    treatmentSelect.appendChild(option);
                });
            }
        }

        // Form submission handlers
        function handleAddSessionSubmission(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const sessionData = {
                patientId: formData.get('add-patient-select'),
                treatmentId: formData.get('add-treatment-select'),
                scheduledDate: formData.get('add-session-date'),
                scheduledTime: formData.get('add-session-time'),
                durationMinutes: parseInt(formData.get('add-session-duration')),
                notes: formData.get('add-session-notes')
            };
            
            // Save to localStorage
            let sessions = JSON.parse(localStorage.getItem('ayursutra_sessions') || '[]');
            const newSession = {
                id: Date.now(),
                ...sessionData,
                status: 'scheduled',
                treatment_name: 'Treatment',
                practitioner_first_name: 'Dr. Demo',
                practitioner_last_name: 'Practitioner'
            };
            sessions.push(newSession);
            localStorage.setItem('ayursutra_sessions', JSON.stringify(sessions));
            
            showMessage('Session added successfully!', 'success');
            closeAddSessionModal();
        }

        function handleRescheduleSubmission(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const sessionId = formData.get('reschedule-session-id');
            const rescheduleData = {
                newDate: formData.get('reschedule-date'),
                newTime: formData.get('reschedule-time'),
                reason: formData.get('reschedule-reason')
            };
            
            showMessage('Reschedule request submitted successfully!', 'success');
            closeRescheduleModal();
        }

        function handleWellnessSubmission(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const wellnessData = {
                energyLevel: document.getElementById('energy-level').value,
                sleepQuality: document.getElementById('sleep-quality').value,
                mood: document.getElementById('mood').value,
                stressLevel: document.getElementById('stress-level').value,
                symptoms: formData.get('symptoms'),
                notes: formData.get('wellness-notes')
            };
            
            // Save to localStorage
            const wellnessLog = {
                id: Date.now(),
                date: new Date().toISOString().split('T')[0],
                ...wellnessData,
                created_at: new Date().toISOString()
            };
            
            let wellnessLogs = JSON.parse(localStorage.getItem('ayursutra_wellness') || '[]');
            wellnessLogs.push(wellnessLog);
            localStorage.setItem('ayursutra_wellness', JSON.stringify(wellnessLogs));
            
            showMessage('Wellness logged successfully!', 'success');
            closeWellnessModal();
        }

        function showMessage(message, type) {
            // Remove existing messages
            const existingMessages = document.querySelectorAll('.message');
            existingMessages.forEach(msg => msg.remove());
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            messageDiv.textContent = message;
            
            document.body.appendChild(messageDiv);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.remove();
                }
            }, 5000);
        }

        // Booking modal functions
        function showBookingModal() {
            console.log('showBookingModal called');
            const modal = document.getElementById('booking-modal');
            console.log('Booking modal found:', modal);
            if (modal) {
                modal.style.display = 'block';
                // Set minimum date to today
                const dateInput = document.getElementById('session-date');
                if (dateInput) {
                    dateInput.min = new Date().toISOString().split('T')[0];
                }
            } else {
                console.error('Booking modal not found!');
            }
        }

        function closeBookingModal() {
            const modal = document.getElementById('booking-modal');
            if (modal) {
                modal.style.display = 'none';
                document.getElementById('booking-form').reset();
            }
        }

        function handleBookingSubmission(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const bookingData = {
                patientName: formData.get('patient-name'),
                treatmentType: formData.get('treatment-type'),
                sessionDate: formData.get('session-date'),
                sessionTime: formData.get('session-time'),
                duration: formData.get('duration'),
                notes: formData.get('notes')
            };
            
            // Save to localStorage
            let sessions = JSON.parse(localStorage.getItem('ayursutra_sessions') || '[]');
            const newSession = {
                id: Date.now(),
                ...bookingData,
                status: 'scheduled',
                treatment_name: bookingData.treatmentType,
                practitioner_first_name: 'Dr. Demo',
                practitioner_last_name: 'Practitioner'
            };
            sessions.push(newSession);
            localStorage.setItem('ayursutra_sessions', JSON.stringify(sessions));
            
            showMessage('Session booked successfully!', 'success');
            closeBookingModal();
        }

        // Make functions globally available
        window.showAddSessionModal = showAddSessionModal;
        window.closeAddSessionModal = closeAddSessionModal;
        window.showRescheduleModal = showRescheduleModal;
        window.closeRescheduleModal = closeRescheduleModal;
        window.showWellnessModal = showWellnessModal;
        window.closeWellnessModal = closeWellnessModal;
        window.showBookingModal = showBookingModal;
        window.closeBookingModal = closeBookingModal;

        // Initialize patient dashboard
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Patient Dashboard DOM loaded');
            
            // Set minimum date to today for booking
            const dateInput = document.getElementById('session-date');
            if (dateInput) {
                dateInput.min = new Date().toISOString().split('T')[0];
            }

            // Add form event listeners
            const bookingForm = document.getElementById('booking-form');
            if (bookingForm) {
                bookingForm.addEventListener('submit', handleBookingSubmission);
                console.log('Booking form listener added');
            }

            const addSessionForm = document.getElementById('add-session-form');
            if (addSessionForm) {
                addSessionForm.addEventListener('submit', handleAddSessionSubmission);
                console.log('Add session form listener added');
            }

            const rescheduleForm = document.getElementById('reschedule-form');
            if (rescheduleForm) {
                rescheduleForm.addEventListener('submit', handleRescheduleSubmission);
                console.log('Reschedule form listener added');
            }

            const wellnessForm = document.getElementById('wellness-form');
            if (wellnessForm) {
                wellnessForm.addEventListener('submit', handleWellnessSubmission);
                console.log('Wellness form listener added');
            }

            // Test if modals exist
            console.log('Add session modal exists:', !!document.getElementById('add-session-modal'));
            console.log('Reschedule modal exists:', !!document.getElementById('reschedule-modal'));
            console.log('Wellness modal exists:', !!document.getElementById('wellness-modal'));
        });
    </script>
</body>
</html>